alert 구상

몽고디비사용.

document를
{ userTo: user uuid,
alertUuid, 알람내용}

결국 user uuid로 풀스캔을 돌려야 할거같은데... 근데 알람은 결국
소비되면 없어지니까 막 DB가 엄청 불어나지는 않을것같고...

성능 측정해보고 또 개선이 중요할듯.

클라이언트에서 user uuid로 api요청이 오면 풀스캔 후 정리해서 클라이언트에 뿌려준다.

또 알람내용을 서비스 내규? 문서? 처럼 정리해서 최대한 내용을 줄이도록 해보자.
type이나, 내용이나 등등.

또 각각의 MSA로부터 오는 알람을 적절하게 변환해서 몽고디비에 삽입.

뭘해도 어쨌든 CRD는 매우많이 일어날듯.

레디스로 대체가능한가?

다른곳으로 알람받아서 저장과 동시에 해당 userUuid 클라이언트랑 연결돼있으면 푸시,  
클라이언트가 알림 누르면 \_id로 db에 삭제요청

알람Form
\_id, userUuid, type, content

알람삽입시 요청에서 uuid추출해서
uuid로 소켓 검색 후 있으면?
그 소켓으로 알람전송

클라이언트가 다른 url으로 이동하면 페이지가 새로고침되면서 소켓연결이 끊겼다가 다시 연결된다.
그러면 alert에서는 그 소켓정보를 useruuid랑 새로 매핑해야함.
이것은 분명 유저가 많아지면 자원을 많이갉아먹을것 같음. 클라이언트는 최대한 페이지 새로고침말고 리렌더링으로 탐색하도록 프런트를 잘 짜야할것같음...
