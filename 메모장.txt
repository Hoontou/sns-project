검색기능 시
post를 검색
1. 태그로 검색 -> match로 tags를 검색 -> 공백기준으로 아예 일치하는것만 찾는듯?
2. 전문으로 검색 -> prefix로 title을 검색 -> 공백기준으로 앞글자부터 매칭되는걸 찾는듯?

태그구현중

1. 유저생성, 프로필 수정 시 엘라스틱에 반영 구현완
2. 업로드 시 타이틀에서 해시태그 부분만 찾아서 태그카운트, 태그와 전문으로 검색위해 엘라스틱에 등록 구현완

더 구현해야할것
3. 댓글과 업로드 타이틀 작성 시 @와 #입력 반응해서 실시간 검색되도록, 
완
4. 글에서 @#들은 <a>태그로 감싸서 리턴하게.
4구현 일부 완료, 해시태그 클릭 시 페이지구현 후 postFooter.tsx로 가서 마무리 하기
지금 해시태그 클릭시 url부분 구현부족 완료

5. 검색 페이지 만들어서 글에서 @, #앞에 붙은 글자들 클릭 시 프로필로 넘어가거나, 해시태그 검색탭으로 넘어가게 해야함
5 할차례, url로 온 string으로 해시태그 검색한 결과창 만들어야함.

23.10.11
완료, 근데 최근 게시물부터 보이게 하려고 createdAt필드를 tags DOC에 추가했고
hashtag.service 에서의 쿼리에서 sort를 썼는데 뭔가 이상하다.
제대로 못불러오는거같음.

titleInput에서 클릭 시 타이틀 수정하는것도 해야함. 완료,


6. 실시간 검색된 결과를 클릭 시 text수정해서 덮어씌우기 

하면 해시태그, 사람태그, 실시간 검색까지 완료인듯? 완료. 23.10.15


몽고랑 엘라스틱 동기화를 구현해놨는데, 정작 사용할일이 잘없다.
db낭비를 줄이기 위해 몽고랑 엘라스틱이랑 저장되는 내용이 다름

hashtag는 post관할,
지금 post랑 metadata랑 경계가 매우 모호하다.. 설게가 잘못된건 아닌거같은데
최초 요청을 metadata로 하는지 post로 하는지 app로 하는지 명확한 기준이 없어서
애매하다.


23.10.11
굉장히 오랜기간 이걸 진행중이다.
지금 느끼는점은, 루즈커플링의 장점은 잘 알겠는데,
내가 설계를 잘못한 탓인지, 너무 루즈하게 하려고 한 탓인지
뭐 하나 수정을하려면 굉장히 많이 찾아가면서 수정을 해야한다...
예를들어 post 한개를 띄우려고 하면, 좋아요 찾아가서 가져와야하고
metadata가서 사진 url 가져와야하고, title이랑 카운트 pgdb가서 가져와야하고
뭐 나름 장단점이 다 있겠는데, 지금 단점만 느끼고 있다.

다르게 생각해보면, 하나에 싹다 몰빵해서 db를 짜본적이 없어서 멀리멀리 분산해서
만드는것의 장점을 못느끼고 있는걸수도 있고..

어쨋든 초반에 생각을 더 해서 db설계를 했어야 했는데 대충 
이렇게하면 잘 굴러가겠지? 하면서 만든걸 후회중이다.

23.10.15
이제 댓글에서도 사람검색해서 태그할수 있게 검색창 띄우기 시작.
23.10.16
완료,
지금 버그가, 검색모달로 실시간검색한 걸 클릭 시 원본
글을 갈아끼우는데, 이게 useState를 사용하다보니까 갈아끼우면서 하는 업데이트가
뭔가 이상하다. 암만 시뮬레이션 돌려봐도 결과는 정확한데
자꾸 이상하게 텍스트가 업데이트됨. state가 이상하다고 밖에 생각안된다.
일단 버그를 인지만 하고 나중에 머리 비우고 구현을 싹다 다시 해봐야할듯.

23.10.17
검색창 구현 시작

해야할일
검색창에서 검색한거 클릭 시 창이동 구현 -완
결과 모두보기 버튼 만들어서 클릭 시 종합검색창으로 이동
종합검색창? 구현

라이브검색 결과 갯수 제한하기

이후 레디스 캐시서버 구현 시작
간단구상
포스트 하나 가져오려면, 여러 서버로 요청보내서 조립해서 클라이언트에 표시하는데,
조립된 결과를 캐시서버에 저장하면, 여러서버로 보내는 요청을 아낄 수 있지 않을까?
라는 생각임. 근데 캐시서버에 있는 결과가 old될 수 있음. 에 대한 방어도 필요

또 검색창에서 보여주는 postlist는 그냥 캐시서버에서 가져오는 포스트들.
